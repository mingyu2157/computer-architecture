# Chapter06 메모리와 캐시메모리

## RAM(메모리)

- 실행할 프로그램의 명령어와 데이터가 저장 -> but 전원을 끄면 모두 날아감 == 휘발성 저장장치

- 휘발성 저장장치에는 실행할 대상 저장

- RAM의 용량이 크면 실행시간이 줄어듬 (but 필요이상으로 커졌을 때는 비례 증가x)

- RAM의 종류

  1. DRAM *Dynamic RAM*

     저장된 데이터가 동적을 변하는(사라지는) RAM -> 일정주기로 데이터를 재활성화(다시 저장) 해야함

     소비전력이 비교적 낮고, 저렴, 집적도 높음

  2. SRAM *static RAM*

     저장된 데이터가 변하지 않는 RAM -> 재활성화x, DRAM보다 일반적으로 빠름

     DRAM보다 집적도 낮음, 소비전력 큼, 비쌈

  3. SDRAM *S*ynchronous Dynamic RAM* (SRAM과 상관 무)

     클럭신호와 동기화된, 발전한 형태의 DRAM -> 클럭 타이밍에 맞춰 CPU와 정보를 주고 받음

  4. DDR SDRAM *Double Data Rate SDRAM*

     대역 폭을 넓혀 속도를 빠르게 만든 SDRAM -> SDRAM보다 두배가량 빠름

## 메모리의 주소 공간

**물리 주소** : 메모리 하드웨어가 사용하는 주소 -> 정보가 실제로 저장된 하드 웨어상의 주소

**논리 주소** : CPU와 실행중인 프로그램이 사용하는 주소 -> 실행중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소



**메모리 관리 장치(MMU)** : CPU와 주소버스 사이에 위치한 논리 주소와 물리 주소의 변환을 수행하는 하드웨어

- CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여 물리 주소로 변환
- 베이스 레지스터 : 프로그램의 가장 작은 물리 주소



**메모리 보호 기법** 

- 다른 프로그램의 영역을 침범할 수 있는 명령어는 위험 -> 한계 레지스터 담당

- 한계 레지스터 : 논리 주소의 최대 크기 저장(프로그램의 크기)
  $$
  (CPU가 접근하려는 논리 주소) <= (한계 레지스터가 저장한 값) *반대의 경우 인터럽트 발생*
  $$



## 캐시 메모리

**저장 장치의 일반적 명제** 

1. CPU와 가까우면 빠르고 멀면 느리다.
2. 속도가 빠른 저장 장치는 용량이 작고 느리다.

**저장 장치 계층 구조 -'CPU에 얼마나 가까운가'**

**캐시 메모리** : CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM 기반의 저장장치

|       레지스터        |     빠름      |        작음        |  비쌈  |
| :-------------------: | :-----------: | :----------------: | :----: |
| L1 캐시 (캐시 메모리) | 코어와 가까움 | 코어마다 갖고 있음 |        |
| L2 캐시 (캐시 메모리) |               | 코어마다 갖고 있음 |        |
| L3 캐시 (캐시 메모리) |   코어와 멈   |  여러 코어가 공유  |        |
| 주기억 장치 (메모리)  |               |                    |        |
|    보조 기억 장치     |     느림      |         큼         | 저렴함 |

- 캐시 메모리는 CPU가 사용할 법한 대상을 예측하여 저장

**참조 지역성 원리** : 캐시 메모리가 메모리로부터 가져올 때의 원칙

1.  CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다. -> 시간 지역성

2. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. -> 공간 지역성

   

- 캐시 히트 : 예측한 데이터가 실제로 캐시 메모리 내 데이터가 활용될 경우 <-> 캐시 미스 : 예측실패(직접 메모리에서 가져옴)

- 캐시 적중률 : 캐시가 히트되는 비율
  $$
  (캐시가  히트되는  비율) = 캐시히트 횟수/(캐시히트 횟수 + 캐시 미스 횟수)
  $$
  